function initLocalStorage(){null==window.localStorage.getItem("highest")&&window.localStorage.setItem("highest",0),null==window.localStorage.getItem("volume")&&window.localStorage.setItem("volume","1.0")}function node(e,t,n,o){this.leftChild=e,this.rightChild=t,this.weight=n,this.opera=o}function BuildUnbalLeftLong(e,t,n,o,r,l,u,i){var s=new node(null,null,t,-1),a=new node(null,null,n,-1),d=new node(s,a,-1e4,l),c=new node(null,null,o,-1),m=new node(d,c,-1e4,u),g=new node(null,null,r,-1);return e=new node(m,g,-1e4,i)}function BuildUnbalRightLong(e,t,n,o,r,l,u,i){var s=new node(null,null,t,-1),a=new node(null,null,n,-1),d=new node(s,a,-1e4,l),c=new node(null,null,o,-1),m=new node(c,d,-1e4,u),g=new node(null,null,r,-1);return e=new node(g,m,-1e4,i)}function BuildBal(e,t,n,o,r,l,u,i){var s=new node(null,null,t,-1),a=new node(null,null,n,-1),d=new node(s,a,-1e4,l),c=new node(null,null,o,-1),m=new node(null,null,r,-1),g=new node(c,m,-1e4,u);return e=new node(d,g,-1e4,i)}function BuildMidLeft(e,t,n,o,r,l,u,i){var s=new node(null,null,t,-1),a=new node(null,null,n,-1),d=new node(s,a,-1e4,l),c=new node(null,null,o,-1),m=new node(c,d,-1e4,u),g=new node(null,null,r,-1);return e=new node(m,g,-1e4,i)}function BuildMidRight(e,t,n,o,r,l,u,i){var s=new node(null,null,t,-1),a=new node(null,null,n,-1),d=new node(s,a,-1e4,l),c=new node(null,null,o,-1),m=new node(d,c,-1e4,u),g=new node(null,null,r,-1);return e=new node(g,m,-1e4,i)}function operate(e,t,n){switch(n){case 0:return result=e+t;case 1:return result=e-t;case 2:return result=e*t;case 3:return result=e/t;case 4:return result=Math.pow(e,t);default:return result=-1e4}}function operation_table(e){switch(e){case 0:return"+";case 1:return"-";case 2:return"*";case 3:return"/";case 4:return"^";default:return"_"}}function regular_prepare(e){switch(e){case 0:return"\\+";case 1:return"\\-";case 2:return"\\*";case 3:return"\\/";case 4:return"\\^";default:return"_"}}function generate_result(e){return null!=e.leftChild&&null!=e.rightChild?"("+generate_result(e.leftChild)+operation_table(e.opera)+generate_result(e.rightChild)+")":e.weight}function generate_RegExp(e){return null!=e.leftChild&&null!=e.rightChild?"\\("+generate_RegExp(e.leftChild)+regular_prepare(e.opera)+generate_RegExp(e.rightChild)+"\\)":e.weight}function weighten(e){null!=e.leftChild&&-1e4==e.leftChild.weight&&weighten(e.leftChild),null!=e.rightChild&&-1e4==e.rightChild.weight&&weighten(e.rightChild),e.weight=operate(e.leftChild.weight,e.rightChild.weight,e.opera)}function myRound(e){return Math.abs(e-Math.round(e))<1e-4?Math.round(e):void 0}function tree_construct(){var e,t,n,o,r,l,u,i=4;for(ifpower&&(i=5),e=0;4>e;e++)for(t=0;4>t;t++)if(e!=t)for(n=0;4>n;n++)if(e!=n&&t!=n)for(o=0;4>o;o++)if(e!=o&&t!=o&&n!=o)for(r=0;i>r;r++)for(l=0;i>l;l++)for(u=0;i>u;u++){var s=new node(null,null,-1e4,-1);s=BuildUnbalLeftLong(s,Number(inputs[e]),Number(inputs[t]),Number(inputs[n]),Number(inputs[o]),r,l,u),weighten(s),myRound(s.weight)==wanted&&add_result(generate_result(s),generate_RegExp(s)),s=BuildUnbalRightLong(s,Number(inputs[e]),Number(inputs[t]),Number(inputs[n]),Number(inputs[o]),r,l,u),weighten(s),myRound(s.weight)==wanted&&add_result(generate_result(s),generate_RegExp(s)),s=BuildBal(s,Number(inputs[e]),Number(inputs[t]),Number(inputs[n]),Number(inputs[o]),r,l,u),weighten(s),myRound(s.weight)==wanted&&add_result(generate_result(s),generate_RegExp(s)),s=BuildMidLeft(s,Number(inputs[e]),Number(inputs[t]),Number(inputs[n]),Number(inputs[o]),r,l,u),weighten(s),myRound(s.weight)==wanted&&add_result(generate_result(s),generate_RegExp(s)),s=BuildMidRight(s,Number(inputs[e]),Number(inputs[t]),Number(inputs[n]),Number(inputs[o]),r,l,u),weighten(s),myRound(s.weight)==wanted&&add_result(generate_result(s),generate_RegExp(s))}}function print_output(){""==resstr&&process()}function add_result(e,t){var n=new RegExp(t+" = "+wanted+"\n");1!=n.test(resstr)&&(resstr=resstr+e+" = "+wanted+"\n",numofsol++)}function process(){generate(),reset(),resstr="",numofsol=0,tree_construct(),print_output()}function pass(){return 0==passes?(alert("No more chance!"),void 0):(passes--,$("#chance"+passes).removeClass("chance"),process(),void 0)}function generate(){inputs[0]=Math.floor(10*Math.random()+1),inputs[1]=Math.floor(10*Math.random()+1),inputs[2]=Math.floor(10*Math.random()+1),inputs[3]=Math.floor(10*Math.random()+1),$("#in1").text(inputs[0]),$("#in2").text(inputs[1]),$("#in3").text(inputs[2]),$("#in4").text(inputs[3])}function timerEvent(){countdown--;Math.floor((maxtime-countdown)/maxtime*100);$("#time-label").html(toMinSec(countdown)),0==countdown&&(complete(),clearInterval(myTimer))}function start(){score=0,passes=3,$("[id^=chance]").addClass("chance"),$(".op-btn").removeClass("selected"),clearInterval(myTimer),$("#score-label").text("Score: "+score),countdown=maxtime,$("#time-label").html(toMinSec(countdown)),myTimer=setInterval(function(){timerEvent()},1e3),process()}function reset(){seq="first",firstNum=0,lastKey="",oper="",operNum=0,$(".op-btn").removeClass("selected");for(var e=1;4>=e;e++)$("#in"+e).removeClass("disabled"),$("#in"+e).removeClass("selected"),$("#in"+e).text(inputs[e-1])}function numKey(e){if(buttonTone.stop(),buttonTone.play(),lastKey!=e){$("#in"+lastKey).removeClass("selected"),$("#in"+e).addClass("selected");var t=0;if("first"==seq||""==oper)lastKey=e,oper="";else if("second"==seq){if("+"==oper)t=firstNum+Number($("#in"+e).text());else if("-"==oper)t=firstNum-Number($("#in"+e).text());else if("x"==oper)t=firstNum*Number($("#in"+e).text());else{if("/"!=oper)return;if(0==Number($("#in"+e).text()))return alert("Toast - Cannot be divided by 0"),void 0;t=firstNum/Number($("#in"+e).text())}$(".op-btn").removeClass("selected"),operNum++,3==operNum&&t==wanted?($("#in"+e).text(t),display(),score++,$("#score-label").text("Score: "+score),process()):($("#in"+e).text(t),$("#in"+lastKey).addClass("disabled"),lastKey=e,seq="first",oper="")}}}function opKey(e,t){""!=lastKey&&($(".op-btn").removeClass("selected"),$(e).addClass("selected"),seq="second",firstNum=Number($("#in"+lastKey).text()),oper=t)}function toMinSec(e){var t=Math.floor(e/60),n=e-60*t,o=t+":"+(10>n?"0"+n:n);return'<i class="fa fa-clock-o"></i>  '+o}function getScore(){return score}function complete(){var e=window.localStorage.getItem("highest");score>e&&window.localStorage.setItem("highest",score),getFbLogin()&&score>getFbScore()&&updateScore(score),$("#yourscore").text("Your Score: "+score),$("#highestscore").text("Highest Score: "+window.localStorage.getItem("highest")),$(":mobile-pagecontainer").pagecontainer("change","#result-page",{transition:"flip",changeHash:!0,reverse:!0})}function display(){$("#good24").show(),$("#good24").animo({animation:"zoomIn",duration:.5},function(){$("#good24").hide()})}function toggleVolume(){$("#volume-btn>i").toggleClass("fa-volume-up fa-volume-off"),"1.0"==window.localStorage.getItem("volume")?window.localStorage.setItem("volume","0.0"):window.localStorage.setItem("volume","1.0"),buttonTone.setVolume(window.localStorage.getItem("volume"))}var inputs=new Array,resstr=new String,numofsol=0;resstr="";var wanted=24,ifpower=!1,maxtime=300,countdown=maxtime,myTimer=null,seq="first",firstNum=0,oper="",operNum=0,score=0,lastKey=0,passes=3,fbscore=0,buttonTone=null,path="",init=function(){initLocalStorage(),0==window.localStorage.getItem("volume")&&$("#volume-btn>i").toggleClass("fa-volume-up fa-volume-off"),path=window.location.pathname,path=path.substr(path,path.length-10),path+="media/tone.wav",buttonTone=new Media(path,function(){},function(){}),buttonTone.setVolume(window.localStorage.getItem("volume"))};$(document).ready(init);